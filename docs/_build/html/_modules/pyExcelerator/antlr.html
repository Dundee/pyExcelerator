
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyExcelerator.antlr &mdash; pyExcelerator 0.6.4.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyExcelerator 0.6.4.1 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../../_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pyExcelerator 0.6.4.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pyExcelerator.antlr</h1><div class="highlight"><pre>
<span class="c">## This file is part of PyANTLR. See LICENSE.txt for license</span>
<span class="c">## details..........Copyright (C) Wolfgang Haefelinger, 2004.</span>

<span class="c">## get sys module</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">version</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">if</span> <span class="n">version</span> <span class="o">&lt;</span> <span class="s">&#39;2.2.1&#39;</span><span class="p">:</span>
    <span class="bp">False</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">version</span> <span class="o">&lt;</span> <span class="s">&#39;2.3&#39;</span><span class="p">:</span>
    <span class="bp">True</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">False</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                     global symbols                             ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<span class="c">### ANTLR Standard Tokens</span>
<span class="n">SKIP</span>                <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">INVALID_TYPE</span>        <span class="o">=</span> <span class="mi">0</span>
<span class="n">EOF_TYPE</span>            <span class="o">=</span> <span class="mi">1</span>
<span class="n">EOF</span>                 <span class="o">=</span> <span class="mi">1</span>
<span class="n">NULL_TREE_LOOKAHEAD</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">MIN_USER_TYPE</span>       <span class="o">=</span> <span class="mi">4</span>

<span class="c">### ANTLR&#39;s EOF Symbol</span>
<span class="n">EOF_CHAR</span>            <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                    general functions                           ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<div class="viewcode-block" id="error"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.error">[docs]</a><span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;error: &quot;</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ifelse"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ifelse">[docs]</a><span class="k">def</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span><span class="n">_then</span><span class="p">,</span><span class="n">_else</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cond</span> <span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">_then</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">_else</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                     ANTLR Exceptions                           ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="ANTLRException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ANTLRException">[docs]</a><span class="k">class</span> <span class="nc">ANTLRException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="RecognitionException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.RecognitionException">[docs]</a><span class="k">class</span> <span class="nc">RecognitionException</span><span class="p">(</span><span class="n">ANTLRException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">ANTLRException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span><span class="p">:</span>
            <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileName</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span><span class="p">:</span>
                <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;line &quot;</span><span class="p">)</span>
            <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">))</span>
            <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">)</span>
        <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>

</div>
<div class="viewcode-block" id="NoViableAltException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.NoViableAltException">[docs]</a><span class="k">class</span> <span class="nc">NoViableAltException</span><span class="p">(</span><span class="n">RecognitionException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node</span>  <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">AST</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">Token</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;NoViableAltException requires Token or AST argument&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">getLine</span><span class="p">()</span>
            <span class="n">col</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">getColumn</span><span class="p">()</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
            <span class="k">return</span> <span class="s">&quot;unexpected symbol at line </span><span class="si">%s</span><span class="s"> (column </span><span class="si">%s</span><span class="s">): </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">==</span> <span class="n">ASTNULL</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;unexpected end of subtree&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span>
        <span class="c">### hackish, we assume that an AST contains method getText</span>
        <span class="k">return</span> <span class="s">&quot;unexpected node: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">getText</span><span class="p">())</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>

</div>
<div class="viewcode-block" id="NoViableAltForCharException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.NoViableAltForCharException">[docs]</a><span class="k">class</span> <span class="nc">NoViableAltForCharException</span><span class="p">(</span><span class="n">RecognitionException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;NoViableAlt&quot;</span><span class="p">,</span>
                                          <span class="n">scanner</span><span class="o">.</span><span class="n">getFilename</span><span class="p">(),</span>
                                          <span class="n">scanner</span><span class="o">.</span><span class="n">getLine</span><span class="p">(),</span>
                                          <span class="n">scanner</span><span class="o">.</span><span class="n">getColumn</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">column</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;NoViableAlt&quot;</span><span class="p">,</span>
                                          <span class="n">fileName</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;NoViableAlt&quot;</span><span class="p">,</span>
                                          <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mesg</span> <span class="o">=</span> <span class="s">&quot;unexpected char: &quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">&gt;=</span> <span class="s">&#39; &#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">&lt;=</span> <span class="s">&#39;~&#39;</span><span class="p">:</span>
            <span class="n">mesg</span> <span class="o">+=</span> <span class="s">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span><span class="p">:</span>
            <span class="n">mesg</span> <span class="o">+=</span> <span class="s">&quot;0x&quot;</span> <span class="o">+</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">()[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mesg</span> <span class="o">+=</span> <span class="s">&quot;&lt;None&gt;&quot;</span>
        <span class="k">return</span> <span class="n">mesg</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>

</div>
<div class="viewcode-block" id="SemanticException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.SemanticException">[docs]</a><span class="k">class</span> <span class="nc">SemanticException</span><span class="p">(</span><span class="n">RecognitionException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="MismatchedCharException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.MismatchedCharException">[docs]</a><span class="k">class</span> <span class="nc">MismatchedCharException</span><span class="p">(</span><span class="n">RecognitionException</span><span class="p">):</span>

    <span class="n">NONE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">CHAR</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">NOT_CHAR</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">RANGE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">NOT_RANGE</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">SET</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">NOT_SET</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="c"># Expected range / not range</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_RANGE</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">RANGE</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upper</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched char range&quot;</span><span class="p">,</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getFilename</span><span class="p">(),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getLine</span><span class="p">(),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getColumn</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c"># Expected char / not char</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_CHAR</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">CHAR</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched char&quot;</span><span class="p">,</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getFilename</span><span class="p">(),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getLine</span><span class="p">(),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getColumn</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">BitSet</span><span class="p">):</span>
            <span class="c"># Expected BitSet / not BitSet</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_SET</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">SET</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched char set&quot;</span><span class="p">,</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getFilename</span><span class="p">(),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getLine</span><span class="p">(),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">getColumn</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NONE</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched char&quot;</span><span class="p">)</span>

    <span class="c">## Append a char to the msg buffer.  If special,</span>
    <span class="c">#  then show escaped version</span>
    <span class="c">#</span>
<div class="viewcode-block" id="MismatchedCharException.appendCharName"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.MismatchedCharException.appendCharName">[docs]</a>    <span class="k">def</span> <span class="nf">appendCharName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span> <span class="ow">or</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">65535</span><span class="p">:</span>
            <span class="c"># 65535 = (char) -1 = EOF</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&#39;&lt;EOF&gt;&#39;&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&#39;</span><span class="se">\\</span><span class="s">n&#39;&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&#39;</span><span class="se">\\</span><span class="s">r&#39;&quot;</span><span class="p">);</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&#39;</span><span class="se">\\</span><span class="s">t&#39;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\&#39;</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="c">##</span>
    <span class="c"># Returns an error message with line number/column information</span>
    <span class="c">#</span></div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sb</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span>
        <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RecognitionException</span><span class="o">.</span><span class="n">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">CHAR</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;, found &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_CHAR</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting anything but &#39;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&#39;; got it anyway&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="ow">in</span> <span class="p">[</span><span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">RANGE</span><span class="p">,</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_RANGE</span><span class="p">]:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting char &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_RANGE</span><span class="p">:</span>
                <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;NOT &quot;</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;in range: &quot;</span><span class="p">)</span>
            <span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;..&quot;</span><span class="p">)</span>
            <span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;, found &quot;</span><span class="p">)</span>
            <span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="ow">in</span> <span class="p">[</span><span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">SET</span><span class="p">,</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">]:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedCharException</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">:</span>
                <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;NOT &quot;</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;one of (&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;), found &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appendCharName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundChar</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">str</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sb</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>

</div>
<div class="viewcode-block" id="MismatchedTokenException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.MismatchedTokenException">[docs]</a><span class="k">class</span> <span class="nc">MismatchedTokenException</span><span class="p">(</span><span class="n">RecognitionException</span><span class="p">):</span>

    <span class="n">NONE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">TOKEN</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">NOT_TOKEN</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">RANGE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">NOT_RANGE</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">SET</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">NOT_SET</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span>  <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span>  <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="c"># Expected range / not range</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_RANGE</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">RANGE</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upper</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c"># Expected token / not token</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_TOKEN</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">TOKEN</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">BitSet</span><span class="p">):</span>
            <span class="c"># Expected BitSet / not BitSet</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_SET</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">SET</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">=</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NONE</span>
            <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched Token: expecting any AST node&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;AST&gt;&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">Token</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
                <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched Token&quot;</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">getLine</span><span class="p">(),</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">getColumn</span><span class="p">())</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">AST</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">)</span>
                <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched Token&quot;</span><span class="p">,</span>
                                              <span class="s">&quot;&lt;AST&gt;&quot;</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">getLine</span><span class="p">(),</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">getColumn</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span> <span class="o">=</span> <span class="s">&quot;&lt;empty tree&gt;&quot;</span>
                <span class="n">RecognitionException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mismatched Token&quot;</span><span class="p">,</span>
                                              <span class="s">&quot;&lt;AST&gt;&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="MismatchedTokenException.appendTokenName"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.MismatchedTokenException.appendTokenName">[docs]</a>    <span class="k">def</span> <span class="nf">appendTokenName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">tokenType</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tokenType</span> <span class="o">==</span> <span class="n">INVALID_TYPE</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&lt;Set of tokens&gt;&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tokenType</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">tokenType</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span><span class="p">):</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokenType</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&gt;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span><span class="p">[</span><span class="n">tokenType</span><span class="p">])</span>

    <span class="c">##</span>
    <span class="c"># Returns an error message with line number/column information</span>
    <span class="c">#</span></div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sb</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span>
        <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RecognitionException</span><span class="o">.</span><span class="n">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appendTokenName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;, found &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_TOKEN</span><span class="p">:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting anything but &#39;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">appendTokenName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&#39;; got it anyway&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="ow">in</span> <span class="p">[</span><span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">RANGE</span><span class="p">,</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_RANGE</span><span class="p">]:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting token &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_RANGE</span><span class="p">:</span>
                <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;NOT &quot;</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;in range: &quot;</span><span class="p">)</span>
            <span class="n">appendTokenName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expecting</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;..&quot;</span><span class="p">)</span>
            <span class="n">appendTokenName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;, found &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="ow">in</span> <span class="p">[</span><span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">SET</span><span class="p">,</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">]:</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;expecting &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mismatchType</span> <span class="o">==</span> <span class="n">MismatchedTokenException</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">:</span>
                <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;NOT &quot;</span><span class="p">)</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;one of (&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">appendTokenName</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;), found &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenText</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">str</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sb</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>

</div>
<div class="viewcode-block" id="TokenStreamException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamException">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamException</span><span class="p">(</span><span class="n">ANTLRException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">ANTLRException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>


<span class="c"># Wraps an Exception in a TokenStreamException</span></div>
<div class="viewcode-block" id="TokenStreamIOException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamIOException">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamIOException</span><span class="p">(</span><span class="n">TokenStreamException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="n">io</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">TokenStreamException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">io</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">io</span> <span class="o">=</span> <span class="n">io</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">TokenStreamException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">io</span> <span class="o">=</span> <span class="bp">self</span>


<span class="c"># Wraps a RecognitionException in a TokenStreamException</span></div>
<div class="viewcode-block" id="TokenStreamRecognitionException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamRecognitionException">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamRecognitionException</span><span class="p">(</span><span class="n">TokenStreamException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">RecognitionException</span><span class="p">):</span>
            <span class="n">recog</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">TokenStreamException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">recog</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recog</span> <span class="o">=</span> <span class="n">recog</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;TokenStreamRecognitionException requires RecognitionException argument&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recog</span><span class="p">)</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>

</div>
<div class="viewcode-block" id="TokenStreamRetryException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamRetryException">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamRetryException</span><span class="p">(</span><span class="n">TokenStreamException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">TokenStreamException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="CharStreamException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharStreamException">[docs]</a><span class="k">class</span> <span class="nc">CharStreamException</span><span class="p">(</span><span class="n">ANTLRException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">ANTLRException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>


<span class="c"># Wraps an Exception in a CharStreamException</span></div>
<div class="viewcode-block" id="CharStreamIOException"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharStreamIOException">[docs]</a><span class="k">class</span> <span class="nc">CharStreamIOException</span><span class="p">(</span><span class="n">CharStreamException</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="n">io</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">CharStreamException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">io</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">io</span> <span class="o">=</span> <span class="n">io</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">CharStreamException</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">io</span> <span class="o">=</span> <span class="bp">self</span>

</div>
<div class="viewcode-block" id="TryAgain"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TryAgain">[docs]</a><span class="k">class</span> <span class="nc">TryAgain</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       Token                                    ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="Token"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token">[docs]</a><span class="k">class</span> <span class="nc">Token</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">SKIP</span>                <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">INVALID_TYPE</span>        <span class="o">=</span> <span class="mi">0</span>
    <span class="n">EOF_TYPE</span>            <span class="o">=</span> <span class="mi">1</span>
    <span class="n">EOF</span>                 <span class="o">=</span> <span class="mi">1</span>
    <span class="n">NULL_TREE_LOOKAHEAD</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">MIN_USER_TYPE</span>       <span class="o">=</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">INVALID_TYPE</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;&lt;no text&gt;&quot;</span>

<div class="viewcode-block" id="Token.isEOF"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.isEOF">[docs]</a>    <span class="k">def</span> <span class="nf">isEOF</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">EOF_TYPE</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Token.getColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.getColumn">[docs]</a>    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="Token.getLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.getLine">[docs]</a>    <span class="k">def</span> <span class="nf">getLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="Token.getFilename"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.getFilename">[docs]</a>    <span class="k">def</span> <span class="nf">getFilename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Token.setFilename"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.setFilename">[docs]</a>    <span class="k">def</span> <span class="nf">setFilename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Token.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;&lt;no text&gt;&quot;</span>
</div>
<div class="viewcode-block" id="Token.setText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">text</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Token.setText requires string argument&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Token.setColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.setColumn">[docs]</a>    <span class="k">def</span> <span class="nf">setColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">column</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Token.setLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.setLine">[docs]</a>    <span class="k">def</span> <span class="nf">setLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Token.getType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.getType">[docs]</a>    <span class="k">def</span> <span class="nf">getType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
</div>
<div class="viewcode-block" id="Token.setType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.setType">[docs]</a>    <span class="k">def</span> <span class="nf">setType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">type</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Token.setType requires integer argument&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Token.toString"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Token.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">## not optimal</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
        <span class="k">if</span> <span class="n">type_</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;NULL_TREE_LOOKAHEAD&#39;</span>
        <span class="k">elif</span> <span class="n">type_</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;EOF_TYPE&#39;</span>
        <span class="k">elif</span> <span class="n">type_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;INVALID_TYPE&#39;</span>
        <span class="k">elif</span> <span class="n">type_</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;SKIP&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="k">return</span> <span class="s">&#39;[&quot;</span><span class="si">%s</span><span class="s">&quot;,&lt;</span><span class="si">%s</span><span class="s">&gt;]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getText</span><span class="p">(),</span><span class="n">tval</span><span class="p">)</span>
</div>
    <span class="n">__str__</span> <span class="o">=</span> <span class="n">toString</span>
    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">toString</span>

<span class="c">### static attribute ..</span></div>
<span class="n">Token</span><span class="o">.</span><span class="n">badToken</span> <span class="o">=</span> <span class="n">Token</span><span class="p">(</span> <span class="nb">type</span><span class="o">=</span><span class="n">INVALID_TYPE</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;&lt;no text&gt;&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;testing ..&quot;</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">Token</span><span class="o">.</span><span class="n">badToken</span>
    <span class="k">print</span> <span class="n">T</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       CommonToken                              ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<div class="viewcode-block" id="CommonToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken">[docs]</a><span class="k">class</span> <span class="nc">CommonToken</span><span class="p">(</span><span class="n">Token</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="n">Token</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">argv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col</span>  <span class="o">=</span> <span class="mi">0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s">&#39;line&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">col</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s">&#39;col&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

<div class="viewcode-block" id="CommonToken.getLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.getLine">[docs]</a>    <span class="k">def</span> <span class="nf">getLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span>
</div>
<div class="viewcode-block" id="CommonToken.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="CommonToken.getColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.getColumn">[docs]</a>    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span>
</div>
<div class="viewcode-block" id="CommonToken.setLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.setLine">[docs]</a>    <span class="k">def</span> <span class="nf">setLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">line</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">line</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="CommonToken.setText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="CommonToken.setColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.setColumn">[docs]</a>    <span class="k">def</span> <span class="nf">setColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">col</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col</span> <span class="o">=</span> <span class="n">col</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="CommonToken.toString"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonToken.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">## not optimal</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
        <span class="k">if</span> <span class="n">type_</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;NULL_TREE_LOOKAHEAD&#39;</span>
        <span class="k">elif</span> <span class="n">type_</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;EOF_TYPE&#39;</span>
        <span class="k">elif</span> <span class="n">type_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;INVALID_TYPE&#39;</span>
        <span class="k">elif</span> <span class="n">type_</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="s">&#39;SKIP&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tval</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s">&#39;text&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
           <span class="s">&#39;type&#39;</span> <span class="p">:</span> <span class="n">tval</span><span class="p">,</span>
           <span class="s">&#39;line&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span>
           <span class="s">&#39;colm&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span>
           <span class="p">}</span>

        <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;[&quot;</span><span class="si">%(text)s</span><span class="s">&quot;,&lt;</span><span class="si">%(type)s</span><span class="s">&gt;,line=</span><span class="si">%(line)s</span><span class="s">,col=</span><span class="si">%(colm)s</span><span class="s">]&#39;</span>
        <span class="k">return</span> <span class="n">fmt</span> <span class="o">%</span> <span class="n">d</span>
</div>
    <span class="n">__str__</span> <span class="o">=</span> <span class="n">toString</span>
    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">toString</span>

</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span> <span class="p">:</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">CommonToken</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">T</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">CommonToken</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s">&quot;some text&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">T</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">CommonToken</span><span class="p">()</span>
    <span class="n">T</span><span class="o">.</span><span class="n">setLine</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">setColumn</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&quot;some text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">T</span>
    <span class="k">print</span> <span class="n">T</span><span class="o">.</span><span class="n">getLine</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">T</span><span class="o">.</span><span class="n">getColumn</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">T</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">T</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                    CommonHiddenStreamToken                     ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<div class="viewcode-block" id="CommonHiddenStreamToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonHiddenStreamToken">[docs]</a><span class="k">class</span> <span class="nc">CommonHiddenStreamToken</span><span class="p">(</span><span class="n">CommonToken</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">CommonToken</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hiddenBefore</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hiddenAfter</span>  <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="CommonHiddenStreamToken.getHiddenAfter"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonHiddenStreamToken.getHiddenAfter">[docs]</a>    <span class="k">def</span> <span class="nf">getHiddenAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hiddenAfter</span>
</div>
<div class="viewcode-block" id="CommonHiddenStreamToken.getHiddenBefore"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonHiddenStreamToken.getHiddenBefore">[docs]</a>    <span class="k">def</span> <span class="nf">getHiddenBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hiddenBefore</span>
</div>
<div class="viewcode-block" id="CommonHiddenStreamToken.setHiddenAfter"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonHiddenStreamToken.setHiddenAfter">[docs]</a>    <span class="k">def</span> <span class="nf">setHiddenAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hiddenAfter</span> <span class="o">=</span> <span class="n">t</span>
</div>
<div class="viewcode-block" id="CommonHiddenStreamToken.setHiddenBefore"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonHiddenStreamToken.setHiddenBefore">[docs]</a>    <span class="k">def</span> <span class="nf">setHiddenBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hiddenBefore</span> <span class="o">=</span> <span class="n">t</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       Queue                                    ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<span class="c">## Shall be a circular buffer on tokens ..</span></div></div>
<div class="viewcode-block" id="Queue"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Queue">[docs]</a><span class="k">class</span> <span class="nc">Queue</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># empty list</span>

<div class="viewcode-block" id="Queue.append"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Queue.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Queue.elementAt"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Queue.elementAt">[docs]</a>    <span class="k">def</span> <span class="nf">elementAt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Queue.reset"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Queue.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="Queue.removeFirst"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Queue.removeFirst">[docs]</a>    <span class="k">def</span> <span class="nf">removeFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Queue.length"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Queue.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       InputBuffer                              ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="InputBuffer"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer">[docs]</a><span class="k">class</span> <span class="nc">InputBuffer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="InputBuffer.commit"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.commit">[docs]</a>    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">-=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="InputBuffer.consume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.consume">[docs]</a>    <span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c">## probably better to return a list of items</span>
    <span class="c">## because of unicode. Or return a unicode</span>
    <span class="c">## string ..</span></div>
<div class="viewcode-block" id="InputBuffer.getLAChars"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.getLAChars">[docs]</a>    <span class="k">def</span> <span class="nf">getLAChars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">while</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">elementAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="c">## probably better to return a list of items</span>
    <span class="c">## because of unicode chars</span></div>
<div class="viewcode-block" id="InputBuffer.getMarkedChars"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.getMarkedChars">[docs]</a>    <span class="k">def</span> <span class="nf">getMarkedChars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span>
        <span class="k">while</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">elementAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>
</div>
<div class="viewcode-block" id="InputBuffer.isMarked"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.isMarked">[docs]</a>    <span class="k">def</span> <span class="nf">isMarked</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">!=</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="InputBuffer.fill"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.fill">[docs]</a>    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">k</span><span class="p">):</span>
        <span class="c">### abstract method</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="InputBuffer.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">elementAt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="InputBuffer.mark"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.mark">[docs]</a>    <span class="k">def</span> <span class="nf">mark</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncConsume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span>
</div>
<div class="viewcode-block" id="InputBuffer.rewind"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.rewind">[docs]</a>    <span class="k">def</span> <span class="nf">rewind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mark</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncConsume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">=</span> <span class="n">mark</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">-=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="InputBuffer.reset"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="InputBuffer.syncConsume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.InputBuffer.syncConsume">[docs]</a>    <span class="k">def</span> <span class="nf">syncConsume</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c"># guess mode -- leave leading characters and bump offset.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># normal mode -- remove first character</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">removeFirst</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       CharBuffer                               ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="CharBuffer"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharBuffer">[docs]</a><span class="k">class</span> <span class="nc">CharBuffer</span><span class="p">(</span><span class="n">InputBuffer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">reader</span><span class="p">):</span>
        <span class="c">##assert isinstance(reader,file)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CharBuffer</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="c">## a reader is supposed to be anything that has</span>
        <span class="c">## a method &#39;read(int)&#39;.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">reader</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">base</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CharBuffer</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span>
        <span class="k">return</span> <span class="s">&quot;CharBuffer{</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">base</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span>

<div class="viewcode-block" id="CharBuffer.fill"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharBuffer.fill">[docs]</a>    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">amount</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">syncConsume</span><span class="p">()</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span><span class="p">)</span> <span class="p">:</span>
                <span class="c">## retrieve just one char - what happend at end</span>
                <span class="c">## of input?</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="c">### python&#39;s behaviour is to return the empty string  on</span>
                <span class="c">### EOF, ie. no exception whatsoever is thrown. An empty</span>
                <span class="c">### python  string  has  the  nice feature that it is of</span>
                <span class="c">### type &#39;str&#39; and  &quot;not &#39;&#39;&quot; would return true. Contrary,</span>
                <span class="c">### one can&#39;t  do  this: &#39;&#39; in &#39;abc&#39;. This should return</span>
                <span class="c">### false,  but all we  get  is  then  a TypeError as an</span>
                <span class="c">### empty string is not a character.</span>

                <span class="c">### Let&#39;s assure then that we have either seen a</span>
                <span class="c">### character or an empty string (EOF).</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

                <span class="c">### And it shall be of type string (ASCII or UNICODE).</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="nb">unicode</span><span class="p">)</span>

                <span class="c">### Just append EOF char to buffer. Note that buffer may</span>
                <span class="c">### contain then just more than one EOF char ..</span>

                <span class="c">### use unicode chars instead of ASCII ..</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CharStreamIOException</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="c">##except: # (mk) Cannot happen ...</span>
            <span class="c">##error (&quot;unexpected exception caught ..&quot;)</span>
            <span class="c">##assert 0</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       LexerSharedInputState                    ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="LexerSharedInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LexerSharedInputState">[docs]</a><span class="k">class</span> <span class="nc">LexerSharedInputState</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ibuf</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ibuf</span><span class="p">,</span><span class="n">InputBuffer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">ibuf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenStartColumn</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenStartLine</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guessing</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="LexerSharedInputState.reset"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LexerSharedInputState.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenStartColumn</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenStartLine</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guessing</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="LexerSharedInputState.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LexerSharedInputState.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">k</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                    TokenStream                                 ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="TokenStream"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStream">[docs]</a><span class="k">class</span> <span class="nc">TokenStream</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<div class="viewcode-block" id="TokenStream.nextToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStream.nextToken">[docs]</a>    <span class="k">def</span> <span class="nf">nextToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TokenStreamIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                    TokenStreamIterator                                 ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="TokenStreamIterator"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamIterator">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamIterator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inst</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span><span class="n">TokenStream</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inst</span> <span class="o">=</span> <span class="n">inst</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;TokenStreamIterator requires TokenStream object&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="TokenStreamIterator.next"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamIterator.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">inst</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inst</span><span class="o">.</span><span class="n">nextToken</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">isEOF</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">item</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                    TokenStreamSelector                        ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="TokenStreamSelector"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamSelector</span><span class="p">(</span><span class="n">TokenStream</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_input</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stmap</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stack</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="TokenStreamSelector.addInputStream"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.addInputStream">[docs]</a>    <span class="k">def</span> <span class="nf">addInputStream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">stream</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stmap</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.getCurrentStream"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.getCurrentStream">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentStream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.getStream"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.getStream">[docs]</a>    <span class="k">def</span> <span class="nf">getStream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sname</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stmap</span><span class="p">[</span><span class="n">sname</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;TokenStream &quot;</span> <span class="o">+</span> <span class="n">sname</span> <span class="o">+</span> <span class="s">&quot; not found&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">stream</span><span class="p">;</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.nextToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.nextToken">[docs]</a>    <span class="k">def</span> <span class="nf">nextToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input</span><span class="o">.</span><span class="n">nextToken</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">TokenStreamRetryException</span><span class="p">,</span><span class="n">r</span><span class="p">:</span>
                <span class="c">### just retry &quot;forever&quot;</span>
                <span class="k">pass</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.pop"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.pop">[docs]</a>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">stream</span><span class="p">;</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.push"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.push">[docs]</a>    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_input</span><span class="p">);</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.retry"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.retry">[docs]</a>    <span class="k">def</span> <span class="nf">retry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">TokenStreamRetryException</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TokenStreamSelector.select"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamSelector.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span><span class="n">TokenStream</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_input</span> <span class="o">=</span> <span class="n">arg</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getStream</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;TokenStreamSelector.select requires &quot;</span> <span class="o">+</span>
                        <span class="s">&quot;TokenStream or string argument&quot;</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                      TokenStreamBasicFilter                    ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="TokenStreamBasicFilter"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamBasicFilter">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamBasicFilter</span><span class="p">(</span><span class="n">TokenStream</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">input</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discardMask</span> <span class="o">=</span> <span class="n">BitSet</span><span class="p">()</span>

<div class="viewcode-block" id="TokenStreamBasicFilter.discard"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamBasicFilter.discard">[docs]</a>    <span class="k">def</span> <span class="nf">discard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">discardMask</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span><span class="n">BitSet</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">discardMark</span> <span class="o">=</span> <span class="n">arg</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;TokenStreamBasicFilter.discard requires&quot;</span> <span class="o">+</span>
                        <span class="s">&quot;integer or BitSet argument&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenStreamBasicFilter.nextToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamBasicFilter.nextToken">[docs]</a>    <span class="k">def</span> <span class="nf">nextToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">nextToken</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">tok</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">discardMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="n">tok</span><span class="o">.</span><span class="n">getType</span><span class="p">()):</span>
            <span class="n">tok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">nextToken</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tok</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                      TokenStreamHiddenTokenFilter              ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter">[docs]</a><span class="k">class</span> <span class="nc">TokenStreamHiddenTokenFilter</span><span class="p">(</span><span class="n">TokenStreamBasicFilter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">input</span><span class="p">):</span>
        <span class="n">TokenStreamBasicFilter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">input</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span> <span class="o">=</span> <span class="n">BitSet</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextMonitoredToken</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastHiddenToken</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">firstHidden</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.consume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.consume">[docs]</a>    <span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextMonitoredToken</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">nextToken</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.consumeFirst"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.consumeFirst">[docs]</a>    <span class="k">def</span> <span class="nf">consumeFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="bp">None</span><span class="p">;</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getType</span><span class="p">())</span> <span class="ow">or</span> \
              <span class="bp">self</span><span class="o">.</span><span class="n">discardMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getType</span><span class="p">()):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getType</span><span class="p">()):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">setHiddenAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">setHiddenBefore</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastHiddenToken</span> <span class="o">=</span> <span class="n">p</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstHidden</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">firstHidden</span> <span class="o">=</span> <span class="n">p</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.getDiscardMask"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.getDiscardMask">[docs]</a>    <span class="k">def</span> <span class="nf">getDiscardMask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">discardMask</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.getHiddenAfter"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.getHiddenAfter">[docs]</a>    <span class="k">def</span> <span class="nf">getHiddenAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">getHiddenAfter</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.getHiddenBefore"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.getHiddenBefore">[docs]</a>    <span class="k">def</span> <span class="nf">getHiddenBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">getHiddenBefore</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.getHideMask"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.getHideMask">[docs]</a>    <span class="k">def</span> <span class="nf">getHideMask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.getInitialHiddenToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.getInitialHiddenToken">[docs]</a>    <span class="k">def</span> <span class="nf">getInitialHiddenToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstHidden</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.hide"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.hide">[docs]</a>    <span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">m</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">BitMask</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span> <span class="o">=</span> <span class="n">m</span>
            <span class="k">return</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nextMonitoredToken</span>
</div>
<div class="viewcode-block" id="TokenStreamHiddenTokenFilter.nextToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenStreamHiddenTokenFilter.nextToken">[docs]</a>    <span class="k">def</span> <span class="nf">nextToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consumeFirst</span><span class="p">()</span>

        <span class="n">monitored</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">monitored</span><span class="o">.</span><span class="n">setHiddenBefore</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastHiddenToken</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastHiddenToken</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">monitored</span>

        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getType</span><span class="p">())</span> <span class="ow">or</span> \
              <span class="bp">self</span><span class="o">.</span><span class="n">discardMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getType</span><span class="p">()):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideMask</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getType</span><span class="p">()):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">setHiddenAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">monitored</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">setHiddenBefore</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastHiddenToken</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">monitored</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       StringBuffer                             ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="StringBuffer"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.StringBuffer">[docs]</a><span class="k">class</span> <span class="nc">StringBuffer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">string</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">string</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="StringBuffer.setLength"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.StringBuffer.setLength">[docs]</a>    <span class="k">def</span> <span class="nf">setLength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sz</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sz</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span>
        <span class="k">assert</span> <span class="n">sz</span><span class="o">&gt;</span><span class="mi">0</span>
        <span class="k">if</span> <span class="n">sz</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="c">### just reset to empty buffer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">sz</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="StringBuffer.length"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.StringBuffer.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="StringBuffer.append"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.StringBuffer.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="c">### return buffer as string. Arg &#39;a&#39; is  used  as index</span>
    <span class="c">## into the buffer and 2nd argument shall be the length.</span>
    <span class="c">## If 2nd args is absent, we return chars till end of</span>
    <span class="c">## buffer starting with &#39;a&#39;.</span></div>
<div class="viewcode-block" id="StringBuffer.getString"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.StringBuffer.getString">[docs]</a>    <span class="k">def</span> <span class="nf">getString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">a</span><span class="o">&gt;=</span><span class="mi">0</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">length</span><span class="p">:</span>
            <span class="c">## no second argument</span>
            <span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="n">a</span><span class="p">:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">length</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">length</span>
            <span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">L</span> <span class="p">:</span> <span class="n">s</span> <span class="o">+=</span> <span class="n">x</span>
        <span class="k">return</span> <span class="n">s</span>
</div>
    <span class="n">toString</span> <span class="o">=</span> <span class="n">getString</span> <span class="c">## alias</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       Reader                                   ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<span class="c">## When reading Japanese chars, it happens that a stream returns a</span>
<span class="c">## &#39;char&#39; of length 2. This looks like  a  bug  in the appropriate</span>
<span class="c">## codecs - but I&#39;m  rather  unsure about this. Anyway, if this is</span>
<span class="c">## the case, I&#39;m going to  split  this string into a list of chars</span>
<span class="c">## and put them  on  hold, ie. on a  buffer. Next time when called</span>
<span class="c">## we read from buffer until buffer is empty.</span>
<span class="c">## wh: nov, 25th -&gt; problem does not appear in Python 2.4.0.c1.</span>
</div>
<div class="viewcode-block" id="Reader"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Reader">[docs]</a><span class="k">class</span> <span class="nc">Reader</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">stream</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cin</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buf</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="Reader.read"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Reader.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">num</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">num</span><span class="o">==</span><span class="mi">1</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buf</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buf</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="c">## Read a char - this may return a string.</span>
        <span class="c">## Is this a bug in codecs/Python?</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cin</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">c</span>

        <span class="n">L</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="n">L</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c">## read one char ..</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       CharScanner                              ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="CharScanner"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner">[docs]</a><span class="k">class</span> <span class="nc">CharScanner</span><span class="p">(</span><span class="n">TokenStream</span><span class="p">):</span>
    <span class="c">## class members</span>
    <span class="n">NO_CHAR</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">EOF_CHAR</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>  <span class="c">### EOF shall be the empty string.</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">argv</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CharScanner</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saveConsumedInput</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenClass</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitive</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitiveLiterals</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">literals</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabsize</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_returnToken</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commitToPath</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">StringBuffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hashString</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTokenObjectClass</span><span class="p">(</span><span class="n">CommonToken</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="o">*</span><span class="n">argv</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">CharScannerIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="CharScanner.setInput"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setInput">[docs]</a>    <span class="k">def</span> <span class="nf">setInput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">argv</span><span class="p">):</span>
        <span class="c">## case 1:</span>
        <span class="c">## if there&#39;s no arg we default to read from</span>
        <span class="c">## standard input</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">argv</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">sys</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c">## get 1st argument</span>
        <span class="n">arg1</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c">## case 2:</span>
        <span class="c">## if arg1 is a string,  we assume it&#39;s a file name</span>
        <span class="c">## and  open  a  stream  using 2nd argument as open</span>
        <span class="c">## mode. If there&#39;s no 2nd argument we fall back to</span>
        <span class="c">## mode &#39;+rb&#39;.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="s">&quot;rb&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setFilename</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c">## case 3:</span>
        <span class="c">## if arg1 is a file we wrap it by a char buffer (</span>
        <span class="c">## some additional checks?? No, can&#39;t do this in</span>
        <span class="c">## general).</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="nb">file</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="n">CharBuffer</span><span class="p">(</span><span class="n">arg1</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="c">## case 4:</span>
        <span class="c">## if arg1 is of type SharedLexerInputState we use</span>
        <span class="c">## argument as is.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">LexerSharedInputState</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">arg1</span>
            <span class="k">return</span>

        <span class="c">## case 5:</span>
        <span class="c">## check whether argument type is of type input</span>
        <span class="c">## buffer. If so create a SharedLexerInputState and</span>
        <span class="c">## go ahead.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">InputBuffer</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="n">LexerSharedInputState</span><span class="p">(</span><span class="n">arg1</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="c">## case 6:</span>
        <span class="c">## check whether argument type has a method read(int)</span>
        <span class="c">## If so create CharBuffer ...</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arg1</span><span class="o">.</span><span class="n">read</span><span class="p">:</span>
                <span class="n">rd</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
                <span class="n">cb</span> <span class="o">=</span> <span class="n">CharBuffer</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
                <span class="n">ss</span> <span class="o">=</span> <span class="n">LexerSharedInputState</span><span class="p">(</span><span class="n">cb</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">ss</span>
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c">## case 7:</span>
        <span class="c">## raise wrong argument exception</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.setTabSize"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setTabSize">[docs]</a>    <span class="k">def</span> <span class="nf">setTabSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">size</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabsize</span> <span class="o">=</span> <span class="n">size</span>
</div>
<div class="viewcode-block" id="CharScanner.getTabSize"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getTabSize">[docs]</a>    <span class="k">def</span> <span class="nf">getTabSize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabsize</span>
</div>
<div class="viewcode-block" id="CharScanner.setCaseSensitive"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setCaseSensitive">[docs]</a>    <span class="k">def</span> <span class="nf">setCaseSensitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitive</span> <span class="o">=</span> <span class="n">t</span>
</div>
<div class="viewcode-block" id="CharScanner.setCommitToPath"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setCommitToPath">[docs]</a>    <span class="k">def</span> <span class="nf">setCommitToPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">commit</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commitToPath</span> <span class="o">=</span> <span class="n">commit</span>
</div>
<div class="viewcode-block" id="CharScanner.setFilename"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setFilename">[docs]</a>    <span class="k">def</span> <span class="nf">setFilename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="CharScanner.setLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setLine">[docs]</a>    <span class="k">def</span> <span class="nf">setLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">line</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">line</span>
</div>
<div class="viewcode-block" id="CharScanner.setText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetText</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.getCaseSensitive"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getCaseSensitive">[docs]</a>    <span class="k">def</span> <span class="nf">getCaseSensitive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitive</span>
</div>
<div class="viewcode-block" id="CharScanner.getCaseSensitiveLiterals"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getCaseSensitiveLiterals">[docs]</a>    <span class="k">def</span> <span class="nf">getCaseSensitiveLiterals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitiveLiterals</span>
</div>
<div class="viewcode-block" id="CharScanner.getColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getColumn">[docs]</a>    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">column</span>
</div>
<div class="viewcode-block" id="CharScanner.setColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setColumn">[docs]</a>    <span class="k">def</span> <span class="nf">setColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="n">c</span>
</div>
<div class="viewcode-block" id="CharScanner.getCommitToPath"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getCommitToPath">[docs]</a>    <span class="k">def</span> <span class="nf">getCommitToPath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">commitToPath</span>
</div>
<div class="viewcode-block" id="CharScanner.getFilename"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getFilename">[docs]</a>    <span class="k">def</span> <span class="nf">getFilename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">filename</span>
</div>
<div class="viewcode-block" id="CharScanner.getInputBuffer"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getInputBuffer">[docs]</a>    <span class="k">def</span> <span class="nf">getInputBuffer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span>
</div>
<div class="viewcode-block" id="CharScanner.getInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getInputState">[docs]</a>    <span class="k">def</span> <span class="nf">getInputState</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span>
</div>
<div class="viewcode-block" id="CharScanner.setInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setInputState">[docs]</a>    <span class="k">def</span> <span class="nf">setInputState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span><span class="n">LexerSharedInputState</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">state</span>
</div>
<div class="viewcode-block" id="CharScanner.getLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getLine">[docs]</a>    <span class="k">def</span> <span class="nf">getLine</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">line</span>
</div>
<div class="viewcode-block" id="CharScanner.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.getTokenObject"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.getTokenObject">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenObject</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_returnToken</span>
</div>
<div class="viewcode-block" id="CharScanner.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitive</span><span class="p">:</span>
            <span class="c">### E0006</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c</span>
</div>
<div class="viewcode-block" id="CharScanner.makeToken"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.makeToken">[docs]</a>    <span class="k">def</span> <span class="nf">makeToken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">type</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c">## dynamically load a class</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenClass</span>
            <span class="n">tok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenClass</span><span class="p">()</span>
            <span class="n">tok</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
            <span class="n">tok</span><span class="o">.</span><span class="n">setColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">tokenStartColumn</span><span class="p">)</span>
            <span class="n">tok</span><span class="o">.</span><span class="n">setLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">tokenStartLine</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tok</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panic</span><span class="p">(</span><span class="s">&quot;unable to create new token&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Token</span><span class="o">.</span><span class="n">badToken</span>
</div>
<div class="viewcode-block" id="CharScanner.mark"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.mark">[docs]</a>    <span class="k">def</span> <span class="nf">mark</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">mark</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_match_bitset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MismatchedCharException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_match_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">c</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MismatchedCharException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">c</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="CharScanner.match"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">unicode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_match_string</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_match_bitset</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.matchNot"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.matchNot">[docs]</a>    <span class="k">def</span> <span class="nf">matchNot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">c</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MismatchedCharException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">c</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.matchRange"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.matchRange">[docs]</a>    <span class="k">def</span> <span class="nf">matchRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">c1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">c2</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="n">MismatchedCharException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CharScanner.newline"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.newline">[docs]</a>    <span class="k">def</span> <span class="nf">newline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">line</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="CharScanner.tab"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.tab">[docs]</a>    <span class="k">def</span> <span class="nf">tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getColumn</span><span class="p">()</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="p">(</span> <span class="p">((</span><span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">tabsize</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabsize</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumn</span><span class="p">(</span><span class="n">nc</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.panic"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.panic">[docs]</a>    <span class="k">def</span> <span class="nf">panic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;CharScanner: panic: &quot;</span> <span class="o">+</span> <span class="n">s</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">reportError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ex</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">print</span> <span class="n">ex</span>

<div class="viewcode-block" id="CharScanner.reportError"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.reportError">[docs]</a>    <span class="k">def</span> <span class="nf">reportError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">():</span>
            <span class="k">print</span> <span class="s">&quot;error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;: error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.reportWarning"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.reportWarning">[docs]</a>    <span class="k">def</span> <span class="nf">reportWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">():</span>
            <span class="k">print</span> <span class="s">&quot;warning: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;: warning: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.resetText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.resetText">[docs]</a>    <span class="k">def</span> <span class="nf">resetText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">setLength</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">tokenStartColumn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">column</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">tokenStartLine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">line</span>
</div>
<div class="viewcode-block" id="CharScanner.rewind"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.rewind">[docs]</a>    <span class="k">def</span> <span class="nf">rewind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">rewind</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.setTokenObjectClass"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.setTokenObjectClass">[docs]</a>    <span class="k">def</span> <span class="nf">setTokenObjectClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cl</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenClass</span> <span class="o">=</span> <span class="n">cl</span>
</div>
<div class="viewcode-block" id="CharScanner.testForLiteral"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.testForLiteral">[docs]</a>    <span class="k">def</span> <span class="nf">testForLiteral</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">token</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="n">Token</span><span class="p">)</span>

        <span class="n">_type</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span>

        <span class="c">## special tokens can&#39;t be literals</span>
        <span class="k">if</span> <span class="n">_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">SKIP</span><span class="p">,</span><span class="n">INVALID_TYPE</span><span class="p">,</span><span class="n">EOF_TYPE</span><span class="p">,</span><span class="n">NULL_TREE_LOOKAHEAD</span><span class="p">]</span> <span class="p">:</span>
            <span class="k">return</span>

        <span class="n">_text</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_text</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_text</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_text</span><span class="p">,</span><span class="nb">unicode</span><span class="p">)</span>
        <span class="n">_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testLiteralsTable</span><span class="p">(</span><span class="n">_text</span><span class="p">,</span><span class="n">_type</span><span class="p">)</span>
        <span class="n">token</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="n">_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_type</span>
</div>
<div class="viewcode-block" id="CharScanner.testLiteralsTable"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.testLiteralsTable">[docs]</a>    <span class="k">def</span> <span class="nf">testLiteralsTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">unicode</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">getString</span><span class="p">()</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c">## check whether integer has been given</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span>

        <span class="c">## check whether we have a dict</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">literals</span><span class="p">,</span><span class="nb">dict</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c">## E0010</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitiveLiterals</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">literals</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="CharScanner.toLower"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.toLower">[docs]</a>    <span class="k">def</span> <span class="nf">toLower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CharScanner.traceIndent"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.traceIndent">[docs]</a>    <span class="k">def</span> <span class="nf">traceIndent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39; &#39;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span>
</div>
<div class="viewcode-block" id="CharScanner.traceIn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.traceIn">[docs]</a>    <span class="k">def</span> <span class="nf">traceIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceIndent</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;&gt; lexer </span><span class="si">%s</span><span class="s"> c== </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rname</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="CharScanner.traceOut"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.traceOut">[docs]</a>    <span class="k">def</span> <span class="nf">traceOut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceIndent</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;&lt; lexer </span><span class="si">%s</span><span class="s"> c== </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rname</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">-=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="CharScanner.uponEOF"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.uponEOF">[docs]</a>    <span class="k">def</span> <span class="nf">uponEOF</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CharScanner.append"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">saveConsumedInput</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.commit"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.commit">[docs]</a>    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CharScanner.consume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.consume">[docs]</a>    <span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">guessing</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">caseSensitive</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># use input.LA(), not LA(), to get original case</span>
                <span class="c"># CharScanner.LA() would toLower it.</span>
                <span class="n">c</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">c</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">in</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tab</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">column</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

    <span class="c">## Consume chars until one matches the given char</span></div>
<div class="viewcode-block" id="CharScanner.consumeUntil_char"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.consumeUntil_char">[docs]</a>    <span class="k">def</span> <span class="nf">consumeUntil_char</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">EOF_CHAR</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">c</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

    <span class="c">## Consume chars until one matches the given set</span></div>
<div class="viewcode-block" id="CharScanner.consumeUntil_bitset"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.consumeUntil_bitset">[docs]</a>    <span class="k">def</span> <span class="nf">consumeUntil_bitset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bitset</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">EOF_CHAR</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

    <span class="c">### If symbol seen is EOF then generate and set token, otherwise</span>
    <span class="c">### throw exception.</span></div>
<div class="viewcode-block" id="CharScanner.default"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.default">[docs]</a>    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">la1</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">la1</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uponEOF</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_returnToken</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeToken</span><span class="p">(</span><span class="n">EOF_TYPE</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raise_NoViableAlt</span><span class="p">(</span><span class="n">la1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.filterdefault"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.filterdefault">[docs]</a>    <span class="k">def</span> <span class="nf">filterdefault</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">la1</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">la1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uponEOF</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_returnToken</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeToken</span><span class="p">(</span><span class="n">EOF_TYPE</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">TryAgain</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c">### apply filter object</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">func</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="nb">apply</span><span class="p">(</span><span class="n">func</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">RecognitionException</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                <span class="c">## catastrophic failure</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reportError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">();</span>
            <span class="k">raise</span> <span class="n">TryAgain</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CharScanner.raise_NoViableAlt"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.raise_NoViableAlt">[docs]</a>    <span class="k">def</span> <span class="nf">raise_NoViableAlt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">la1</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">la1</span><span class="p">:</span> <span class="n">la1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">()</span>
        <span class="n">line</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLine</span><span class="p">()</span>
        <span class="n">col</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getColumn</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">NoViableAltForCharException</span><span class="p">(</span><span class="n">la1</span><span class="p">,</span><span class="n">fname</span><span class="p">,</span><span class="n">line</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CharScanner.set_return_token"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScanner.set_return_token">[docs]</a>    <span class="k">def</span> <span class="nf">set_return_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">_create</span><span class="p">,</span><span class="n">_token</span><span class="p">,</span><span class="n">_ttype</span><span class="p">,</span><span class="n">_offset</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">_create</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">_token</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">_ttype</span> <span class="o">==</span> <span class="n">SKIP</span><span class="p">):</span>
            <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="n">_offset</span><span class="p">)</span>
            <span class="n">_token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeToken</span><span class="p">(</span><span class="n">_ttype</span><span class="p">)</span>
            <span class="n">_token</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_returnToken</span> <span class="o">=</span> <span class="n">_token</span>
        <span class="k">return</span> <span class="n">_token</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                   CharScannerIterator                          ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="CharScannerIterator"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScannerIterator">[docs]</a><span class="k">class</span> <span class="nc">CharScannerIterator</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inst</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span><span class="n">CharScanner</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inst</span> <span class="o">=</span> <span class="n">inst</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;CharScannerIterator requires CharScanner object&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="CharScannerIterator.next"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CharScannerIterator.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">inst</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inst</span><span class="o">.</span><span class="n">nextToken</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">isEOF</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">item</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       BitSet                                   ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<span class="c">### I&#39;m assuming here that a long is 64bits. It appears however, that</span>
<span class="c">### a long is of any size. That means we can use a single long as the</span>
<span class="c">### bitset (!), ie. Python would do almost all the work (TBD).</span>
</div></div>
<div class="viewcode-block" id="BitSet"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet">[docs]</a><span class="k">class</span> <span class="nc">BitSet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">BITS</span>     <span class="o">=</span> <span class="mi">64</span>
    <span class="n">NIBBLE</span>   <span class="o">=</span> <span class="mi">4</span>
    <span class="n">LOG_BITS</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">MOD_MASK</span> <span class="o">=</span> <span class="n">BITS</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">BitSet</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,[</span><span class="nb">long</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="n">BitSet</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,[</span><span class="nb">long</span><span class="p">(</span><span class="n">data</span><span class="p">)])</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">long</span><span class="p">):</span>
            <span class="n">BitSet</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,[</span><span class="n">data</span><span class="p">])</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;BitSet requires integer, long, or &quot;</span> <span class="o">+</span>
                            <span class="s">&quot;list argument&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">long</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s">&quot;List argument item is &quot;</span> <span class="o">+</span>
                                <span class="s">&quot;not a long: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">*</span> <span class="n">BitSet</span><span class="o">.</span><span class="n">BITS</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">bits</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s">&quot;1&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s">&quot;o&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;|</span><span class="si">%s</span><span class="s">|&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="BitSet.member"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet.member">[docs]</a>    <span class="k">def</span> <span class="nf">member</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">unicode</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s">&quot;char or unichar expected: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">))</span>

        <span class="c">## char is a (unicode) string with at most lenght 1, ie.</span>
        <span class="c">## a char.</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s">&quot;char expected: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">))</span>

        <span class="c">### handle ASCII/UNICODE char</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="c">### check whether position num is in bitset</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BitSet.wordNumber"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet.wordNumber">[docs]</a>    <span class="k">def</span> <span class="nf">wordNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bit</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">bit</span> <span class="o">&gt;&gt;</span> <span class="n">BitSet</span><span class="o">.</span><span class="n">LOG_BITS</span>
</div>
<div class="viewcode-block" id="BitSet.bitMask"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet.bitMask">[docs]</a>    <span class="k">def</span> <span class="nf">bitMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bit</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">bit</span> <span class="o">&amp;</span> <span class="n">BitSet</span><span class="o">.</span><span class="n">MOD_MASK</span>  <span class="c">## bit mod BITS</span>
        <span class="k">return</span> <span class="p">(</span><span class="il">1L</span> <span class="o">&lt;&lt;</span> <span class="n">pos</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BitSet.set"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bit</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="c"># grow bitset as required (use with care!)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordNumber</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bitMask</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">&gt;=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">d</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="il">0L</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">on</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|=</span>  <span class="n">mask</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="n">mask</span><span class="p">)</span>

    <span class="c">### make add an alias for set</span></div>
    <span class="n">add</span> <span class="o">=</span> <span class="nb">set</span>

<div class="viewcode-block" id="BitSet.off"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet.off">[docs]</a>    <span class="k">def</span> <span class="nf">off</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bit</span><span class="p">,</span><span class="n">off</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">bit</span><span class="p">,</span><span class="ow">not</span> <span class="n">off</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BitSet.at"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BitSet.at">[docs]</a>    <span class="k">def</span> <span class="nf">at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bit</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordNumber</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bitMask</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span> <span class="o">&amp;</span> <span class="n">m</span>


<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                      some further funcs                        ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="illegalarg_ex"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.illegalarg_ex">[docs]</a><span class="k">def</span> <span class="nf">illegalarg_ex</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
       <span class="s">&quot;</span><span class="si">%s</span><span class="s"> is only valid if parser is built for debugging&quot;</span> <span class="o">%</span>
       <span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">func_name</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="runtime_ex"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.runtime_ex">[docs]</a><span class="k">def</span> <span class="nf">runtime_ex</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">RuntimeException</span><span class="p">(</span>
       <span class="s">&quot;</span><span class="si">%s</span><span class="s"> is only valid if parser is built for debugging&quot;</span> <span class="o">%</span>
       <span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">func_name</span><span class="p">))</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       TokenBuffer                              ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="TokenBuffer"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer">[docs]</a><span class="k">class</span> <span class="nc">TokenBuffer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">stream</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>

<div class="viewcode-block" id="TokenBuffer.reset"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TokenBuffer.consume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.consume">[docs]</a>    <span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="TokenBuffer.fill"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.fill">[docs]</a>    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncConsume</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">nextToken</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TokenBuffer.getInput"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.getInput">[docs]</a>    <span class="k">def</span> <span class="nf">getInput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span>
</div>
<div class="viewcode-block" id="TokenBuffer.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">elementAt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">type</span>
</div>
<div class="viewcode-block" id="TokenBuffer.LT"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.LT">[docs]</a>    <span class="k">def</span> <span class="nf">LT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">elementAt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenBuffer.mark"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.mark">[docs]</a>    <span class="k">def</span> <span class="nf">mark</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncConsume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span>
</div>
<div class="viewcode-block" id="TokenBuffer.rewind"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.rewind">[docs]</a>    <span class="k">def</span> <span class="nf">rewind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mark</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncConsume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">=</span> <span class="n">mark</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">-=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="TokenBuffer.syncConsume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TokenBuffer.syncConsume">[docs]</a>    <span class="k">def</span> <span class="nf">syncConsume</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c"># guess mode -- leave leading characters and bump offset.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># normal mode -- remove first character</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">removeFirst</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span> <span class="o">-=</span> <span class="mi">1</span>
</div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">nMarkers</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">markerOffset</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">numToConsume</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       ParserSharedInputState                   ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="ParserSharedInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ParserSharedInputState">[docs]</a><span class="k">class</span> <span class="nc">ParserSharedInputState</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<div class="viewcode-block" id="ParserSharedInputState.reset"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ParserSharedInputState.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guessing</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       Parser                                   ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="Parser"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser">[docs]</a><span class="k">class</span> <span class="nc">Parser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">returnAST</span>  <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenTypeToASTClassMap</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">ParserSharedInputState</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="n">arg0</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">ParserSharedInputState</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">arg0</span>
        <span class="k">return</span>

<div class="viewcode-block" id="Parser.getTokenTypeToASTClassMap"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getTokenTypeToASTClassMap">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenTypeToASTClassMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenTypeToASTClassMap</span>

</div>
<div class="viewcode-block" id="Parser.addMessageListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addMessageListener">[docs]</a>    <span class="k">def</span> <span class="nf">addMessageListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">:</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addMessageListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.addParserListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addParserListener">[docs]</a>    <span class="k">def</span> <span class="nf">addParserListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">)</span> <span class="p">:</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addParserListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.addParserMatchListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addParserMatchListener">[docs]</a>    <span class="k">def</span> <span class="nf">addParserMatchListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">)</span> <span class="p">:</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addParserMatchListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.addParserTokenListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addParserTokenListener">[docs]</a>    <span class="k">def</span> <span class="nf">addParserTokenListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addParserTokenListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.addSemanticPredicateListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addSemanticPredicateListener">[docs]</a>    <span class="k">def</span> <span class="nf">addSemanticPredicateListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addSemanticPredicateListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.addSyntacticPredicateListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addSyntacticPredicateListener">[docs]</a>    <span class="k">def</span> <span class="nf">addSyntacticPredicateListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addSyntacticPredicateListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.addTraceListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addTraceListener">[docs]</a>    <span class="k">def</span> <span class="nf">addTraceListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">illegalarg_ex</span><span class="p">(</span><span class="n">addTraceListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.consume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.consume">[docs]</a>    <span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_consumeUntil_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tokenType</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">EOF_TYPE</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">tokenType</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_consumeUntil_bitset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">EOF_TYPE</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">set</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

<div class="viewcode-block" id="Parser.consumeUntil"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.consumeUntil">[docs]</a>    <span class="k">def</span> <span class="nf">consumeUntil</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_consumeUntil_type</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_consumeUntil_bitset</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.defaultDebuggingSetup"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.defaultDebuggingSetup">[docs]</a>    <span class="k">def</span> <span class="nf">defaultDebuggingSetup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="Parser.getAST"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getAST">[docs]</a>    <span class="k">def</span> <span class="nf">getAST</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">returnAST</span>
</div>
<div class="viewcode-block" id="Parser.getASTFactory"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getASTFactory">[docs]</a>    <span class="k">def</span> <span class="nf">getASTFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span>
</div>
<div class="viewcode-block" id="Parser.getFilename"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getFilename">[docs]</a>    <span class="k">def</span> <span class="nf">getFilename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">filename</span>
</div>
<div class="viewcode-block" id="Parser.getInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getInputState">[docs]</a>    <span class="k">def</span> <span class="nf">getInputState</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span>
</div>
<div class="viewcode-block" id="Parser.setInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setInputState">[docs]</a>    <span class="k">def</span> <span class="nf">setInputState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">state</span>
</div>
<div class="viewcode-block" id="Parser.getTokenName"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getTokenName">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.getTokenNames"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.getTokenNames">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenNames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span>
</div>
<div class="viewcode-block" id="Parser.isDebugMode"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.isDebugMode">[docs]</a>    <span class="k">def</span> <span class="nf">isDebugMode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">false</span>
</div>
<div class="viewcode-block" id="Parser.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Parser.LT"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.LT">[docs]</a>    <span class="k">def</span> <span class="nf">LT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Parser.mark"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.mark">[docs]</a>    <span class="k">def</span> <span class="nf">mark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">mark</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_match_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">t</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LT</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">t</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_match_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">b</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">))):</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">LT</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>

<div class="viewcode-block" id="Parser.match"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">set</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_match_int</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span><span class="n">BitSet</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_match_set</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Parser.match requires integer ot BitSet argument&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.matchNot"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.matchNot">[docs]</a>    <span class="k">def</span> <span class="nf">matchNot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">t</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span>
               <span class="n">tokenNames</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LT</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">t</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Parser.removeMessageListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeMessageListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeMessageListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeMessageListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.removeParserListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeParserListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeParserListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeParserListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.removeParserMatchListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeParserMatchListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeParserMatchListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeParserMatchListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.removeParserTokenListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeParserTokenListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeParserTokenListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeParserTokenListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.removeSemanticPredicateListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeSemanticPredicateListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeSemanticPredicateListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeSemanticPredicateListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.removeSyntacticPredicateListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeSyntacticPredicateListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeSyntacticPredicateListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeSyntacticPredicateListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.removeTraceListener"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.removeTraceListener">[docs]</a>    <span class="k">def</span> <span class="nf">removeTraceListener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">removeTraceListener</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.reportError"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.reportError">[docs]</a>    <span class="k">def</span> <span class="nf">reportError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s">&quot;syntax error:&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">:&quot;</span> <span class="o">%</span> <span class="n">f</span><span class="p">)</span> <span class="o">+</span> <span class="n">fmt</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Token</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">getColumn</span><span class="p">()</span>
            <span class="n">col</span>  <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">getLine</span><span class="p">()</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
            <span class="n">fmt</span>  <span class="o">=</span> <span class="n">fmt</span> <span class="o">+</span> <span class="s">&#39;unexpected symbol at line </span><span class="si">%s</span><span class="s"> (column </span><span class="si">%s</span><span class="s">) : &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">%</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.reportWarning"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.reportWarning">[docs]</a>    <span class="k">def</span> <span class="nf">reportWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFilename</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">:warning: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;warning: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Parser.rewind"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.rewind">[docs]</a>    <span class="k">def</span> <span class="nf">rewind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">rewind</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.setASTFactory"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setASTFactory">[docs]</a>    <span class="k">def</span> <span class="nf">setASTFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span> <span class="o">=</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="Parser.setASTNodeClass"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setASTNodeClass">[docs]</a>    <span class="k">def</span> <span class="nf">setASTNodeClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cl</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span><span class="o">.</span><span class="n">setASTNodeType</span><span class="p">(</span><span class="n">cl</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.setASTNodeType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setASTNodeType">[docs]</a>    <span class="k">def</span> <span class="nf">setASTNodeType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeType</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setASTNodeClass</span><span class="p">(</span><span class="n">nodeType</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.setDebugMode"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setDebugMode">[docs]</a>    <span class="k">def</span> <span class="nf">setDebugMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debugMode</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span><span class="p">):</span>
            <span class="n">runtime_ex</span><span class="p">(</span><span class="n">setDebugMode</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.setFilename"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setFilename">[docs]</a>    <span class="k">def</span> <span class="nf">setFilename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="Parser.setIgnoreInvalidDebugCalls"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setIgnoreInvalidDebugCalls">[docs]</a>    <span class="k">def</span> <span class="nf">setIgnoreInvalidDebugCalls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignoreInvalidDebugCalls</span> <span class="o">=</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="Parser.setTokenBuffer"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.setTokenBuffer">[docs]</a>    <span class="k">def</span> <span class="nf">setTokenBuffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">t</span>
</div>
<div class="viewcode-block" id="Parser.traceIndent"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.traceIndent">[docs]</a>    <span class="k">def</span> <span class="nf">traceIndent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot; &quot;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span>
</div>
<div class="viewcode-block" id="Parser.traceIn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.traceIn">[docs]</a>    <span class="k">def</span> <span class="nf">traceIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&quot;&gt; &quot;</span><span class="p">,</span> <span class="n">rname</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.traceOut"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.traceOut">[docs]</a>    <span class="k">def</span> <span class="nf">traceOut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&quot;&lt; &quot;</span><span class="p">,</span> <span class="n">rname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="c">### wh: moved from ASTFactory to Parser</span></div>
<div class="viewcode-block" id="Parser.addASTChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.addASTChild">[docs]</a>    <span class="k">def</span> <span class="nf">addASTChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">currentAST</span><span class="p">,</span> <span class="n">child</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">child</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">child</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">setFirstChild</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">setNextSibling</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="n">child</span>
        <span class="n">currentAST</span><span class="o">.</span><span class="n">advanceChildToEnd</span><span class="p">()</span>

    <span class="c">### wh: moved from ASTFactory to Parser</span></div>
<div class="viewcode-block" id="Parser.makeASTRoot"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.Parser.makeASTRoot">[docs]</a>    <span class="k">def</span> <span class="nf">makeASTRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">currentAST</span><span class="p">,</span><span class="n">root</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">root</span><span class="p">:</span>
            <span class="c">### Add the current root as a child of new root</span>
            <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">currentAST</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
            <span class="c">### The new current child is the last sibling of the old root</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">advanceChildToEnd</span><span class="p">()</span>
            <span class="c">### Set the new root</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       LLkParser                                ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="LLkParser"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser">[docs]</a><span class="k">class</span> <span class="nc">LLkParser</span><span class="p">(</span><span class="n">Parser</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">LLkParser</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">arg1</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">ParserSharedInputState</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">LLkParser</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_k</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">TokenBuffer</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">LLkParser</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTokenBuffer</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_k</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">TokenStream</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">LLkParser</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
            <span class="n">tokenBuf</span> <span class="o">=</span> <span class="n">TokenBuffer</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTokenBuffer</span><span class="p">(</span><span class="n">tokenBuf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_k</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c">### unknown argument</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;LLkParser requires integer, &quot;</span> <span class="o">+</span>
                        <span class="s">&quot;ParserSharedInputStream or TokenStream argument&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="LLkParser.consume"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.consume">[docs]</a>    <span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">consume</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="LLkParser.LA"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.LA">[docs]</a>    <span class="k">def</span> <span class="nf">LA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">LA</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="LLkParser.LT"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.LT">[docs]</a>    <span class="k">def</span> <span class="nf">LT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">LT</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="LLkParser.set_k"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.set_k">[docs]</a>    <span class="k">def</span> <span class="nf">set_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="LLkParser.trace"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.trace">[docs]</a>    <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ee</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceIndent</span><span class="p">()</span>
        <span class="n">guess</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">guessing</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">guess</span> <span class="o">=</span> <span class="s">&quot; [guessing]&quot;</span>
        <span class="k">print</span><span class="p">(</span><span class="n">ee</span> <span class="o">+</span> <span class="n">rname</span> <span class="o">+</span> <span class="n">guess</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LT</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">LT</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="s">&quot;null&quot;</span>
            <span class="k">print</span> <span class="s">&quot;LA(</span><span class="si">%s</span><span class="s">) == </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="LLkParser.traceIn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.traceIn">[docs]</a>    <span class="k">def</span> <span class="nf">traceIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&quot;&gt; &quot;</span><span class="p">,</span> <span class="n">rname</span><span class="p">);</span>
</div>
<div class="viewcode-block" id="LLkParser.traceOut"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.LLkParser.traceOut">[docs]</a>    <span class="k">def</span> <span class="nf">traceOut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&quot;&lt; &quot;</span><span class="p">,</span> <span class="n">rname</span><span class="p">);</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                    TreeParserSharedInputState                  ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="TreeParserSharedInputState"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParserSharedInputState">[docs]</a><span class="k">class</span> <span class="nc">TreeParserSharedInputState</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guessing</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       TreeParser                               ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="TreeParser"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser">[docs]</a><span class="k">class</span> <span class="nc">TreeParser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputState</span> <span class="o">=</span> <span class="n">TreeParserSharedInputState</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_retTree</span>   <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">returnAST</span>  <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span> <span class="o">=</span> <span class="n">ASTFactory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="TreeParser.getAST"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.getAST">[docs]</a>    <span class="k">def</span> <span class="nf">getAST</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">returnAST</span>
</div>
<div class="viewcode-block" id="TreeParser.getASTFactory"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.getASTFactory">[docs]</a>    <span class="k">def</span> <span class="nf">getASTFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span>
</div>
<div class="viewcode-block" id="TreeParser.getTokenName"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.getTokenName">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="TreeParser.getTokenNames"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.getTokenNames">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenNames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenNames</span>
</div>
<div class="viewcode-block" id="TreeParser.match"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="nb">set</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span><span class="n">BitSet</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span> <span class="ow">or</span> <span class="n">t</span> <span class="o">==</span> <span class="n">ASTNULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getTokenNames</span><span class="p">(),</span> <span class="n">t</span><span class="p">,</span><span class="nb">set</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">t</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getTokenNames</span><span class="p">(),</span> <span class="n">t</span><span class="p">,</span><span class="nb">set</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span><span class="n">BitSet</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">set</span><span class="o">.</span><span class="n">member</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getType</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getTokenNames</span><span class="p">(),</span> <span class="n">t</span><span class="p">,</span><span class="nb">set</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TreeParser.matchNot"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.matchNot">[docs]</a>    <span class="k">def</span> <span class="nf">matchNot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">,</span> <span class="n">ttype</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span> <span class="ow">or</span> <span class="p">(</span><span class="n">t</span> <span class="o">==</span> <span class="n">ASTNULL</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ttype</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MismatchedTokenException</span><span class="p">(</span><span class="n">getTokenNames</span><span class="p">(),</span> <span class="n">t</span><span class="p">,</span> <span class="n">ttype</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TreeParser.reportError"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.reportError">[docs]</a>    <span class="k">def</span> <span class="nf">reportError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ex</span><span class="p">):</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span><span class="s">&quot;error:&quot;</span><span class="p">,</span><span class="n">ex</span>
</div>
<div class="viewcode-block" id="TreeParser.reportWarning"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.reportWarning">[docs]</a>    <span class="k">def</span>  <span class="nf">reportWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;warning:&quot;</span><span class="p">,</span><span class="n">s</span>
</div>
<div class="viewcode-block" id="TreeParser.setASTFactory"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.setASTFactory">[docs]</a>    <span class="k">def</span> <span class="nf">setASTFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span> <span class="o">=</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="TreeParser.setASTNodeType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.setASTNodeType">[docs]</a>    <span class="k">def</span> <span class="nf">setASTNodeType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nodeType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setASTNodeClass</span><span class="p">(</span><span class="n">nodeType</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TreeParser.setASTNodeClass"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.setASTNodeClass">[docs]</a>    <span class="k">def</span> <span class="nf">setASTNodeClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nodeType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">astFactory</span><span class="o">.</span><span class="n">setASTNodeType</span><span class="p">(</span><span class="n">nodeType</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TreeParser.traceIndent"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.traceIndent">[docs]</a>    <span class="k">def</span> <span class="nf">traceIndent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot; &quot;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span>
</div>
<div class="viewcode-block" id="TreeParser.traceIn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.traceIn">[docs]</a>    <span class="k">def</span> <span class="nf">traceIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceIndent</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;&gt; &quot;</span> <span class="o">+</span> <span class="n">rname</span> <span class="o">+</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span>
              <span class="n">ifelse</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span><span class="s">&quot;null&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span> <span class="o">+</span>
              <span class="n">ifelse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">guessing</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;[guessing]&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TreeParser.traceOut"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.traceOut">[docs]</a>    <span class="k">def</span> <span class="nf">traceOut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rname</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceIndent</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;&lt; &quot;</span> <span class="o">+</span> <span class="n">rname</span> <span class="o">+</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span>
              <span class="n">ifelse</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span><span class="s">&quot;null&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span> <span class="o">+</span>
              <span class="n">ifelse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputState</span><span class="o">.</span><span class="n">guessing</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;[guessing]&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traceDepth</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="c">### wh: moved from ASTFactory to TreeParser</span></div>
<div class="viewcode-block" id="TreeParser.addASTChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.addASTChild">[docs]</a>    <span class="k">def</span> <span class="nf">addASTChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">currentAST</span><span class="p">,</span> <span class="n">child</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">child</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">child</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">setFirstChild</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">setNextSibling</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="n">child</span>
        <span class="n">currentAST</span><span class="o">.</span><span class="n">advanceChildToEnd</span><span class="p">()</span>

    <span class="c">### wh: moved from ASTFactory to TreeParser</span></div>
<div class="viewcode-block" id="TreeParser.makeASTRoot"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.TreeParser.makeASTRoot">[docs]</a>    <span class="k">def</span> <span class="nf">makeASTRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">currentAST</span><span class="p">,</span><span class="n">root</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">root</span><span class="p">:</span>
            <span class="c">### Add the current root as a child of new root</span>
            <span class="n">root</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">currentAST</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
            <span class="c">### The new current child is the last sibling of the old root</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">advanceChildToEnd</span><span class="p">()</span>
            <span class="c">### Set the new root</span>
            <span class="n">currentAST</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###               funcs to work on trees                           ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="rightmost"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.rightmost">[docs]</a><span class="k">def</span> <span class="nf">rightmost</span><span class="p">(</span><span class="n">ast</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ast</span><span class="p">:</span>
        <span class="k">while</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">right</span><span class="p">):</span>
            <span class="n">ast</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">right</span>
    <span class="k">return</span> <span class="n">ast</span>
</div>
<div class="viewcode-block" id="cmptree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.cmptree">[docs]</a><span class="k">def</span> <span class="nf">cmptree</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">partial</span><span class="p">):</span>
    <span class="k">while</span><span class="p">(</span><span class="n">s</span> <span class="ow">and</span> <span class="n">t</span><span class="p">):</span>
        <span class="c">### as a quick optimization, check roots first.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="c">### if roots match, do full list match test on children.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cmptree</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span><span class="n">t</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span><span class="n">partial</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="n">partial</span><span class="p">,</span><span class="ow">not</span> <span class="n">t</span><span class="p">,</span><span class="ow">not</span> <span class="n">s</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">t</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                          AST                                   ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="AST"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST">[docs]</a><span class="k">class</span> <span class="nc">AST</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="AST.addChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.addChild">[docs]</a>    <span class="k">def</span> <span class="nf">addChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="AST.equals"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.equals">[docs]</a>    <span class="k">def</span> <span class="nf">equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="AST.equalsList"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.equalsList">[docs]</a>    <span class="k">def</span> <span class="nf">equalsList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="AST.equalsListPartial"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.equalsListPartial">[docs]</a>    <span class="k">def</span> <span class="nf">equalsListPartial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="AST.equalsTree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.equalsTree">[docs]</a>    <span class="k">def</span> <span class="nf">equalsTree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="AST.equalsTreePartial"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.equalsTreePartial">[docs]</a>    <span class="k">def</span> <span class="nf">equalsTreePartial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="AST.findAll"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.findAll">[docs]</a>    <span class="k">def</span> <span class="nf">findAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="AST.findAllPartial"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.findAllPartial">[docs]</a>    <span class="k">def</span> <span class="nf">findAllPartial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subtree</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="AST.getFirstChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getFirstChild">[docs]</a>    <span class="k">def</span> <span class="nf">getFirstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="AST.getNextSibling"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getNextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">getNextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="AST.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span>
</div>
<div class="viewcode-block" id="AST.getType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getType">[docs]</a>    <span class="k">def</span> <span class="nf">getType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">INVALID_TYPE</span>
</div>
<div class="viewcode-block" id="AST.getLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getLine">[docs]</a>    <span class="k">def</span> <span class="nf">getLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="AST.getColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getColumn">[docs]</a>    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="AST.getNumberOfChildren"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.getNumberOfChildren">[docs]</a>    <span class="k">def</span> <span class="nf">getNumberOfChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">txt</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="AST.initialize"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.initialize">[docs]</a>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="AST.setFirstChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.setFirstChild">[docs]</a>    <span class="k">def</span> <span class="nf">setFirstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="AST.setNextSibling"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.setNextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">setNextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="AST.setText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="AST.setType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.setType">[docs]</a>    <span class="k">def</span> <span class="nf">setType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ttype</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="AST.toString"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
</div>
    <span class="n">__str__</span> <span class="o">=</span> <span class="n">toString</span>

<div class="viewcode-block" id="AST.toStringList"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.toStringList">[docs]</a>    <span class="k">def</span> <span class="nf">toStringList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="AST.toStringTree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.AST.toStringTree">[docs]</a>    <span class="k">def</span> <span class="nf">toStringTree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       ASTNULLType                              ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<span class="c">### There is only one instance of this class **/</span></div></div>
<div class="viewcode-block" id="ASTNULLType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTNULLType">[docs]</a><span class="k">class</span> <span class="nc">ASTNULLType</span><span class="p">(</span><span class="n">AST</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">AST</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="ASTNULLType.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTNULLType.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;&lt;ASTNULL&gt;&quot;</span>
</div>
<div class="viewcode-block" id="ASTNULLType.getType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTNULLType.getType">[docs]</a>    <span class="k">def</span> <span class="nf">getType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">NULL_TREE_LOOKAHEAD</span>


<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       BaseAST                                  ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="BaseAST"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST">[docs]</a><span class="k">class</span> <span class="nc">BaseAST</span><span class="p">(</span><span class="n">AST</span><span class="p">):</span>

    <span class="n">verboseStringConversion</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">tokenNames</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">down</span>  <span class="o">=</span> <span class="bp">None</span> <span class="c">## kid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="bp">None</span> <span class="c">## sibling</span>

<div class="viewcode-block" id="BaseAST.addChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.addChild">[docs]</a>    <span class="k">def</span> <span class="nf">addChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">rightmost</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">down</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">node</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">down</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">down</span> <span class="o">=</span> <span class="n">node</span>
</div>
<div class="viewcode-block" id="BaseAST.getNumberOfChildren"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getNumberOfChildren">[docs]</a>    <span class="k">def</span> <span class="nf">getNumberOfChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">down</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">t</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">right</span>
        <span class="k">return</span> <span class="n">n</span>
</div>
<div class="viewcode-block" id="BaseAST.doWorkForFindAll"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.doWorkForFindAll">[docs]</a>    <span class="k">def</span> <span class="nf">doWorkForFindAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">target</span><span class="p">,</span><span class="n">partialMatch</span><span class="p">):</span>
        <span class="n">sibling</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="k">while</span> <span class="n">sibling</span><span class="p">:</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">partialMatch</span> <span class="ow">and</span> <span class="n">sibling</span><span class="o">.</span><span class="n">equalsTreePartial</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">c1</span><span class="p">:</span>
                <span class="n">v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c2</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">partialMatch</span> <span class="ow">and</span> <span class="n">sibling</span><span class="o">.</span><span class="n">equalsTree</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">c2</span><span class="p">:</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span>

            <span class="c">### regardless of match or not, check any children for matches</span>
            <span class="k">if</span> <span class="n">sibling</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">():</span>
                <span class="n">sibling</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">()</span><span class="o">.</span><span class="n">doWorkForFindAll</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">target</span><span class="p">,</span><span class="n">partialMatch</span><span class="p">)</span>

            <span class="n">sibling</span> <span class="o">=</span> <span class="n">sibling</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>

    <span class="c">### Is node t equal to &#39;self&#39; in terms of token type and text?</span></div>
<div class="viewcode-block" id="BaseAST.equals"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.equals">[docs]</a>    <span class="k">def</span> <span class="nf">equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span>

    <span class="c">### Is t an exact structural and equals() match of this tree.  The</span>
    <span class="c">### &#39;self&#39; reference is considered the start of a sibling list.</span>
    <span class="c">###</span></div>
<div class="viewcode-block" id="BaseAST.equalsList"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.equalsList">[docs]</a>    <span class="k">def</span> <span class="nf">equalsList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cmptree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c">### Is &#39;t&#39; a subtree of this list?</span>
    <span class="c">### The siblings of the root are NOT ignored.</span>
    <span class="c">###</span></div>
<div class="viewcode-block" id="BaseAST.equalsListPartial"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.equalsListPartial">[docs]</a>    <span class="k">def</span> <span class="nf">equalsListPartial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cmptree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">partial</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c">### Is tree rooted at &#39;self&#39; equal to &#39;t&#39;?  The siblings</span>
    <span class="c">### of &#39;self&#39; are ignored.</span>
    <span class="c">###</span></div>
<div class="viewcode-block" id="BaseAST.equalsTree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.equalsTree">[docs]</a>    <span class="k">def</span> <span class="nf">equalsTree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="ow">and</span> \
               <span class="n">cmptree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span> <span class="n">t</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span> <span class="n">partial</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c">### Is &#39;t&#39; a subtree of the tree rooted at &#39;self&#39;?  The siblings</span>
    <span class="c">### of &#39;self&#39; are ignored.</span>
    <span class="c">###</span></div>
<div class="viewcode-block" id="BaseAST.equalsTreePartial"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.equalsTreePartial">[docs]</a>    <span class="k">def</span> <span class="nf">equalsTreePartial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cmptree</span><span class="p">(</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span> <span class="n">t</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span> <span class="n">partial</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c">### Walk the tree looking for all exact subtree matches.  Return</span>
    <span class="c">### an ASTEnumerator that lets the caller walk the list</span>
    <span class="c">### of subtree roots found herein.</span></div>
<div class="viewcode-block" id="BaseAST.findAll"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.findAll">[docs]</a>    <span class="k">def</span> <span class="nf">findAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">target</span><span class="p">):</span>
        <span class="n">roots</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c">### the empty tree cannot result in an enumeration</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">target</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="c"># find all matches recursively</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doWorkForFindAll</span><span class="p">(</span><span class="n">roots</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">roots</span>

    <span class="c">### Walk the tree looking for all subtrees.  Return</span>
    <span class="c">###  an ASTEnumerator that lets the caller walk the list</span>
    <span class="c">###  of subtree roots found herein.</span></div>
<div class="viewcode-block" id="BaseAST.findAllPartial"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.findAllPartial">[docs]</a>    <span class="k">def</span> <span class="nf">findAllPartial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sub</span><span class="p">):</span>
        <span class="n">roots</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c">### the empty tree cannot result in an enumeration</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sub</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">doWorkForFindAll</span><span class="p">(</span><span class="n">roots</span><span class="p">,</span> <span class="n">sub</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>  <span class="c">### find all matches recursively</span>
        <span class="k">return</span> <span class="n">roots</span>

    <span class="c">### Get the first child of this node None if not children</span></div>
<div class="viewcode-block" id="BaseAST.getFirstChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getFirstChild">[docs]</a>    <span class="k">def</span> <span class="nf">getFirstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">down</span>

    <span class="c">### Get the next sibling in line after this one</span></div>
<div class="viewcode-block" id="BaseAST.getNextSibling"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getNextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">getNextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span>

    <span class="c">### Get the token text for this node</span></div>
<div class="viewcode-block" id="BaseAST.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span>

    <span class="c">### Get the token type for this node</span></div>
<div class="viewcode-block" id="BaseAST.getType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getType">[docs]</a>    <span class="k">def</span> <span class="nf">getType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="BaseAST.getLine"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getLine">[docs]</a>    <span class="k">def</span> <span class="nf">getLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="BaseAST.getColumn"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getColumn">[docs]</a>    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="c">### Remove all children */</span></div>
<div class="viewcode-block" id="BaseAST.removeChildren"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.removeChildren">[docs]</a>    <span class="k">def</span> <span class="nf">removeChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">down</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="BaseAST.setFirstChild"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.setFirstChild">[docs]</a>    <span class="k">def</span> <span class="nf">setFirstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">down</span> <span class="o">=</span> <span class="n">c</span>
</div>
<div class="viewcode-block" id="BaseAST.setNextSibling"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.setNextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">setNextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">n</span>

    <span class="c">### Set the token text for this node</span></div>
<div class="viewcode-block" id="BaseAST.setText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c">### Set the token type for this node</span></div>
<div class="viewcode-block" id="BaseAST.setType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.setType">[docs]</a>    <span class="k">def</span> <span class="nf">setType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ttype</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c">### static</span></div>
<div class="viewcode-block" id="BaseAST.setVerboseStringConversion"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.setVerboseStringConversion">[docs]</a>    <span class="k">def</span> <span class="nf">setVerboseStringConversion</span><span class="p">(</span><span class="n">verbose</span><span class="p">,</span><span class="n">names</span><span class="p">):</span>
        <span class="n">verboseStringConversion</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="n">tokenNames</span> <span class="o">=</span> <span class="n">names</span></div>
    <span class="n">setVerboseStringConversion</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">setVerboseStringConversion</span><span class="p">)</span>

    <span class="c">### Return an array of strings that maps token ID to it&#39;s text.</span>
    <span class="c">##  @since 2.7.3</span>
<div class="viewcode-block" id="BaseAST.getTokenNames"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.getTokenNames">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenNames</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">tokenNames</span>
</div>
<div class="viewcode-block" id="BaseAST.toString"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>

    <span class="c">### return tree as lisp string - sibling included</span></div>
<div class="viewcode-block" id="BaseAST.toStringList"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.toStringList">[docs]</a>    <span class="k">def</span> <span class="nf">toStringList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toStringTree</span><span class="p">()</span>
        <span class="n">sib</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">sib</span><span class="p">:</span>
            <span class="n">ts</span> <span class="o">+=</span> <span class="n">sib</span><span class="o">.</span><span class="n">toStringList</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ts</span>
</div>
    <span class="n">__str__</span> <span class="o">=</span> <span class="n">toStringList</span>

    <span class="c">### return tree as string - siblings ignored</span>
<div class="viewcode-block" id="BaseAST.toStringTree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.BaseAST.toStringTree">[docs]</a>    <span class="k">def</span> <span class="nf">toStringTree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">kid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">kid</span><span class="p">:</span>
            <span class="n">ts</span> <span class="o">+=</span> <span class="s">&quot; (&quot;</span>
        <span class="n">ts</span> <span class="o">+=</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">kid</span><span class="p">:</span>
            <span class="n">ts</span> <span class="o">+=</span> <span class="n">kid</span><span class="o">.</span><span class="n">toStringList</span><span class="p">()</span>
            <span class="n">ts</span> <span class="o">+=</span> <span class="s">&quot; )&quot;</span>
        <span class="k">return</span> <span class="n">ts</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       CommonAST                                ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>

<span class="c">### Common AST node implementation</span></div></div>
<div class="viewcode-block" id="CommonAST"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonAST">[docs]</a><span class="k">class</span> <span class="nc">CommonAST</span><span class="p">(</span><span class="n">BaseAST</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">token</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CommonAST</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ttype</span> <span class="o">=</span> <span class="n">INVALID_TYPE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span>  <span class="o">=</span> <span class="s">&quot;&lt;no text&gt;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="c">#assert self.text</span>

    <span class="c">### Get the token text for this node</span>
<div class="viewcode-block" id="CommonAST.getText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonAST.getText">[docs]</a>    <span class="k">def</span> <span class="nf">getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>

    <span class="c">### Get the token type for this node</span></div>
<div class="viewcode-block" id="CommonAST.getType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonAST.getType">[docs]</a>    <span class="k">def</span> <span class="nf">getType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ttype</span>
</div>
<div class="viewcode-block" id="CommonAST.initialize"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonAST.initialize">[docs]</a>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">arg0</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="n">arg0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">Token</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">arg0</span><span class="o">.</span><span class="n">getText</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="n">arg0</span><span class="o">.</span><span class="n">getType</span><span class="p">())</span>
            <span class="k">return</span>

    <span class="c">### Set the token text for this node</span></div>
<div class="viewcode-block" id="CommonAST.setText"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonAST.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">text_</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text_</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text_</span>

    <span class="c">### Set the token type for this node</span></div>
<div class="viewcode-block" id="CommonAST.setType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonAST.setType">[docs]</a>    <span class="k">def</span> <span class="nf">setType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ttype_</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ttype_</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ttype</span> <span class="o">=</span> <span class="n">ttype_</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                     CommonASTWithHiddenTokens                  ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="CommonASTWithHiddenTokens"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonASTWithHiddenTokens">[docs]</a><span class="k">class</span> <span class="nc">CommonASTWithHiddenTokens</span><span class="p">(</span><span class="n">CommonAST</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">CommonAST</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hiddenBefore</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hiddenAfter</span>  <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="CommonASTWithHiddenTokens.getHiddenAfter"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonASTWithHiddenTokens.getHiddenAfter">[docs]</a>    <span class="k">def</span> <span class="nf">getHiddenAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hiddenAfter</span>
</div>
<div class="viewcode-block" id="CommonASTWithHiddenTokens.getHiddenBefore"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonASTWithHiddenTokens.getHiddenBefore">[docs]</a>    <span class="k">def</span> <span class="nf">getHiddenBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hiddenBefore</span>
</div>
<div class="viewcode-block" id="CommonASTWithHiddenTokens.initialize"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.CommonASTWithHiddenTokens.initialize">[docs]</a>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">CommonAST</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">Token</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">CommonHiddenStreamToken</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hideenBefore</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getHiddenBefore</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hiddenAfter</span>  <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getHiddenAfter</span><span class="p">()</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       ASTPair                                  ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<div class="viewcode-block" id="ASTPair"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTPair">[docs]</a><span class="k">class</span> <span class="nc">ASTPair</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">None</span>          <span class="c">### current root of tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="bp">None</span>         <span class="c">### current child to which siblings are added</span>

    <span class="c">### Make sure that child is the last sibling */</span>
<div class="viewcode-block" id="ASTPair.advanceChildToEnd"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTPair.advanceChildToEnd">[docs]</a>    <span class="k">def</span> <span class="nf">advanceChildToEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>

    <span class="c">### Copy an ASTPair.  Don&#39;t call it clone() because we want type-safety */</span></div>
<div class="viewcode-block" id="ASTPair.copy"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTPair.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">ASTPair</span><span class="p">()</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span>
        <span class="k">return</span> <span class="n">tmp</span>
</div>
<div class="viewcode-block" id="ASTPair.toString"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTPair.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="ow">not</span> <span class="n">root</span><span class="p">,</span><span class="s">&quot;null&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">getText</span><span class="p">())</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="ow">not</span> <span class="n">child</span><span class="p">,</span><span class="s">&quot;null&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">getText</span><span class="p">())</span>
        <span class="k">return</span> <span class="s">&quot;[</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
</div>
    <span class="n">__str__</span> <span class="o">=</span> <span class="n">toString</span>
    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">toString</span>


<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       ASTFactory                               ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="ASTFactory"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory">[docs]</a><span class="k">class</span> <span class="nc">ASTFactory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_class</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="n">table</span><span class="p">,</span><span class="n">table</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>

<div class="viewcode-block" id="ASTFactory.create"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.create">[docs]</a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">INVALID_TYPE</span><span class="p">)</span>

        <span class="n">arg0</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">arg1</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">arg2</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">arg2</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c"># ctor(int)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">arg2</span><span class="p">:</span>
            <span class="c">### get class for &#39;self&#39; type</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getASTNodeType</span><span class="p">(</span><span class="n">arg0</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span> <span class="n">ifelse</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">arg1</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">t</span>

        <span class="c"># ctor(int,something)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">arg2</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">arg2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">arg1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>

        <span class="c"># ctor(AST)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">AST</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">arg0</span><span class="o">.</span><span class="n">getType</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">arg0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>

        <span class="c"># ctor(token)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">Token</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">arg1</span><span class="p">:</span>
            <span class="n">ttype</span> <span class="o">=</span> <span class="n">arg0</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ttype</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">ttype</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">arg0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>

        <span class="c"># ctor(token,class)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="n">Token</span><span class="p">)</span> <span class="ow">and</span> <span class="n">arg1</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="nb">type</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span>
            <span class="c"># this creates instance of &#39;arg1&#39; using &#39;arg0&#39; as</span>
            <span class="c"># argument. Wow, that&#39;s magic!</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">arg1</span><span class="p">(</span><span class="n">arg0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">t</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>

        <span class="c"># ctor(class)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg0</span><span class="p">,</span><span class="nb">type</span><span class="p">):</span>
            <span class="c">### next statement creates instance of type (!)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">arg0</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>

</div>
<div class="viewcode-block" id="ASTFactory.setASTNodeClass"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.setASTNodeClass">[docs]</a>    <span class="k">def</span> <span class="nf">setASTNodeClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">className</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">className</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">className</span><span class="p">,</span><span class="nb">type</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">className</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_class</span> <span class="o">=</span> <span class="n">className</span>

    <span class="c">### kind of misnomer - use setASTNodeClass instead.</span></div>
    <span class="n">setASTNodeType</span> <span class="o">=</span> <span class="n">setASTNodeClass</span>

<div class="viewcode-block" id="ASTFactory.getASTNodeClass"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.getASTNodeClass">[docs]</a>    <span class="k">def</span> <span class="nf">getASTNodeClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_class</span>


</div>
<div class="viewcode-block" id="ASTFactory.getTokenTypeToASTClassMap"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.getTokenTypeToASTClassMap">[docs]</a>    <span class="k">def</span> <span class="nf">getTokenTypeToASTClassMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span>
</div>
<div class="viewcode-block" id="ASTFactory.setTokenTypeToASTClassMap"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.setTokenTypeToASTClassMap">[docs]</a>    <span class="k">def</span> <span class="nf">setTokenTypeToASTClassMap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">amap</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span> <span class="o">=</span> <span class="n">amap</span>
</div>
<div class="viewcode-block" id="ASTFactory.error"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.error">[docs]</a>    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">sys</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">e</span>
</div>
<div class="viewcode-block" id="ASTFactory.setTokenTypeASTNodeType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.setTokenTypeASTNodeType">[docs]</a>    <span class="k">def</span> <span class="nf">setTokenTypeASTNodeType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tokenType</span><span class="p">,</span> <span class="n">className</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Specify a mapping between a token type and a (AST) class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">className</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span><span class="p">[</span><span class="n">tokenType</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c">### here we should also perform actions to ensure that</span>
            <span class="c">### a. class can be loaded</span>
            <span class="c">### b. class is a subclass of AST</span>
            <span class="c">###</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">className</span><span class="p">,</span><span class="nb">type</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">className</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span>  <span class="c">## a &amp; b</span>
            <span class="c">### enter the class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span><span class="p">[</span><span class="n">tokenType</span><span class="p">]</span> <span class="o">=</span> <span class="n">className</span>
</div>
<div class="viewcode-block" id="ASTFactory.getASTNodeType"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.getASTNodeType">[docs]</a>    <span class="k">def</span> <span class="nf">getASTNodeType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tokenType</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For a given token type return the AST node type. First we</span>
<span class="sd">        lookup a mapping table, second we try _class</span>
<span class="sd">        and finally we resolve to &quot;antlr.CommonAST&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># first</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classmap</span><span class="p">[</span><span class="n">tokenType</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">c</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">c</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="c"># second</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_class</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_class</span>

        <span class="c"># default</span>
        <span class="k">return</span> <span class="n">CommonAST</span>

    <span class="c">### methods that have been moved to file scope - just listed</span>
    <span class="c">### here to be somewhat consistent with original API</span></div>
<div class="viewcode-block" id="ASTFactory.dup"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.dup">[docs]</a>    <span class="k">def</span> <span class="nf">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">antlr</span><span class="o">.</span><span class="n">dup</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ASTFactory.dupList"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.dupList">[docs]</a>    <span class="k">def</span> <span class="nf">dupList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">antlr</span><span class="o">.</span><span class="n">dupList</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ASTFactory.dupTree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTFactory.dupTree">[docs]</a>    <span class="k">def</span> <span class="nf">dupTree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">antlr</span><span class="o">.</span><span class="n">dupTree</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>

    <span class="c">### methods moved to other classes</span>
    <span class="c">### 1. makeASTRoot  -&gt; Parser</span>
    <span class="c">### 2. addASTChild  -&gt; Parser</span>

    <span class="c">### non-standard: create alias for longish method name</span></div>
    <span class="n">maptype</span> <span class="o">=</span> <span class="n">setTokenTypeASTNodeType</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###                       ASTVisitor                               ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div>
<div class="viewcode-block" id="ASTVisitor"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTVisitor">[docs]</a><span class="k">class</span> <span class="nc">ASTVisitor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="ASTVisitor.visit"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.ASTVisitor.visit">[docs]</a>    <span class="k">def</span> <span class="nf">visit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ast</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
<span class="c">###               static methods and variables                     ###</span>
<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###</span>
</div></div>
<span class="n">ASTNULL</span> <span class="o">=</span> <span class="n">ASTNULLType</span><span class="p">()</span>

<span class="c">### wh: moved from ASTFactory as there&#39;s nothing ASTFactory-specific</span>
<span class="c">### in this method.</span>
<div class="viewcode-block" id="make"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.make">[docs]</a><span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="o">*</span><span class="n">nodes</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">node</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span><span class="n">AST</span><span class="p">)</span>

    <span class="n">root</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">root</span><span class="p">:</span>
        <span class="n">root</span><span class="o">.</span><span class="n">setFirstChild</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">root</span><span class="p">:</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">tail</span><span class="p">:</span>
            <span class="n">root</span><span class="o">.</span><span class="n">setFirstChild</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">tail</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tail</span><span class="o">.</span><span class="n">setNextSibling</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>

        <span class="c">### Chase tail to last sibling</span>
        <span class="k">while</span> <span class="n">tail</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">():</span>
            <span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">root</span>
</div>
<div class="viewcode-block" id="dup"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.dup">[docs]</a><span class="k">def</span> <span class="nf">dup</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">factory</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="k">if</span> <span class="n">factory</span><span class="p">:</span>
        <span class="n">dup_t</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;dup function requires ASTFactory argument&quot;</span><span class="p">)</span>
    <span class="n">dup_t</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dup_t</span>
</div>
<div class="viewcode-block" id="dupList"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.dupList">[docs]</a><span class="k">def</span> <span class="nf">dupList</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">factory</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">dupTree</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">factory</span><span class="p">)</span>
    <span class="n">nt</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">while</span> <span class="n">t</span><span class="p">:</span>
        <span class="c">## for each sibling of the root</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>
        <span class="n">nt</span><span class="o">.</span><span class="n">setNextSibling</span><span class="p">(</span><span class="n">dupTree</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">factory</span><span class="p">))</span>
        <span class="n">nt</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">getNextSibling</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">result</span>
</div>
<div class="viewcode-block" id="dupTree"><a class="viewcode-back" href="../../pyExcelerator.html#pyExcelerator.antlr.dupTree">[docs]</a><span class="k">def</span> <span class="nf">dupTree</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">factory</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">dup</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">factory</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">setFirstChild</span><span class="p">(</span><span class="n">dupList</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getFirstChild</span><span class="p">(),</span><span class="n">factory</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="c">###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span class="c">### $Id: antlr.py,v 1.2 2005/10/26 07:44:24 rvk Exp $</span>

<span class="c"># Local Variables:    ***</span>
<span class="c"># mode: python        ***</span>
<span class="c"># py-indent-offset: 4 ***</span>
<span class="c"># End:                ***</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <script type="text/javascript">
    /* <![CDATA[ */
        (function() {
            var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
            s.type = 'text/javascript';
            s.async = true;
            s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
            t.parentNode.insertBefore(s, t);
        })();
    /* ]]> */</script>

    <div class="footer">
      &copy; Copyright 2012, Rick van Hattem.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>